<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8" />
		<title>热门分类</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="../../../css/bootstrap.min.css" />
		<link rel="stylesheet" href="../../../css/ace.min.css" />
		<link rel="stylesheet" href="../../../css/style.css" />
		<link rel="stylesheet" href="../../../css/style_i.css" />
		<link rel="stylesheet" href="../../../font/css/font-awesome.min.css" />
		<link rel="stylesheet" href="../../../js/layer/skin/layer.css" />
		<!--[if IE 7]>
		  <link rel="stylesheet" href="../../../font/css/font-awesome-ie7.min.css" />
		  <link rel="stylesheet" href="../../../css/ace-ie.min.css" />
		<![endif]-->

		<link rel="stylesheet" href="../../../css/mine/all.css" />
		<link rel="stylesheet" href="../../../css/mine/public.css" />
		<script src="../../../js/jquery-1.10.2.min.js"></script>
		<script src="../../../js/bootstrap.min.js"></script>
		<script src="../../../js/jquery.dataTables.min.js"></script>
		<script src="../../../js/jquery.dataTables.bootstrap.js"></script>
		<script src="../../../js/layer/layer.js" type="text/javascript"></script>
		<script src="../../../js/laydate/laydate.js" type="text/javascript"></script>
		<script src="../../../script/public.js" type="text/javascript"></script>

		<script src="../../../js/photoloads.js" type="text/javascript"></script>

		<style>
			.goods-list ul {
				padding: 0;
			}
			
			.goods-list ul li {
				width: 20%;
				display: inline-block;
				cursor: default;
				text-decoration: underline;
			}
			
			.big-photo {
				margin-top: 10px;
			}
			
			.big-photo img {
				box-shadow: 0px 1px 5px rgba(0, 0, 0, 0.15);
			}
			
			.search-div {
				padding: 25px 0;
				margin-bottom: 20px;
				box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.15);
			}
			
			.col-xs-3 {
				padding: 0;
				line-height: 35px;
			}
			
			#classificationTwo_sale,
			#classificationTwo_new,
			#classificationTwo_presale,
			#classificationTwo_hot {
				border-left: 0;
				border-right: 0;
			}
			
			.form-group {
				margin-bottom: 0;
			}
			
			.search-div .jl-btn-importent {
				margin-left: 40px;
			}
			
			.delgoods-div {
				display: inline-block;
				color: #ff7e7e;
			}
		</style>
	</head>

	<body class="content">
		<div class="page-content clearfix">
			<div id="Member_Ratings">
				<div class="d_Confirm_Order_style" style="margin-top:10px;">
					<h4 class="text-title">热门分类</h4>

					<div class="search-div clearfix">
						<form class="container-fluid">
							<div class="row">
								<div class="col-xs-10">
									<div class="form-group">
										<label for="" class="col-xs-2 control-label">分类名称：</label>
										<div class="col-xs-10">
											火热促销
										</div>
									</div>
									<div class="form-group">
										<label for="" class="col-xs-2 control-label">商品列表：</label>
										<div class="col-xs-10 goods-list">
											<ul class="col-xs-12" id="goodsul_sale">
											</ul>
											<div class="col-xs-3">
												<select id="classificationOne_sale" class="form-control" data-state="3">
													<option value="-1" selected="selected">一级分类</option>
													<option data-id="1" value="第一大类">第一大类</option>
													<option data-id="2" value="第二大类">第二大类</option>
													<option data-id="3" value="第三大类">第三大类</option>
													<option data-id="4" value="第四大类">第四大类</option>
													<option data-id="5" value="第五大类">第五大类</option>
												</select>
											</div>
											<div class="col-xs-3">
												<select id="classificationTwo_sale" class="form-control" data-state="2">
													<option value="-1" selected="selected">二级分类</option>
													<option data-id="1" value="粮食">粮食</option>
													<option data-id="2" value="好吃的">好吃的</option>
													<option data-id="3" value="化妆品">化妆品</option>
													<option data-id="4" value="电器">电器</option>
												</select>
											</div>
											<div class="col-xs-3">
												<select id="goods_sale" class="form-control" data-state="1">
													<option value="-1" selected="selected">商品名称</option>
													<option data-id="1" value="九多肉多">九多肉多</option>
													<option data-id="2" value="棉花糖">棉花糖</option>
													<option data-id="3" value="日历">日历</option>
													<option data-id="4" value="笔记本">笔记本</option>
												</select>
											</div>
											<div class="col-xs-3">
												<button type="button" class="btncss jl-btn-importent" id="goodsAddBtn_sale">新增</button>
												<input type="text" id="goodsidStr_sale" class="hidden" />
												<input type="text" id="stateStr_sale" class="hidden" />
											</div>
										</div>
									</div>
								</div>
								<div class="col-xs-2">
									<div class="big-photo">
										<div id="preview0">
											<img id="imghead0" border="0" src="../../../img/photo_icon.jpg" width="90" height="90" onclick="$('#previewImg0').click();">
										</div>
										<input type="file" onchange="previewImage(this,0)" style="display: none;" id="previewImg0" name="previewImg" accept="image/gif,image/jpeg,image/jpg,image/png,image/svg">
										<!--<input id="uploaderInput" class="uploader__input" style="display: none;" type="file" accept="" multiple="">-->
									</div>
								</div>
							</div>
						</form>
					</div>

					<div class="search-div clearfix">
						<form class="container-fluid">
							<div class="row">
								<div class="col-xs-10">
									<div class="form-group">
										<label for="" class="col-xs-2 control-label">分类名称：</label>
										<div class="col-xs-10">
											新品上架
										</div>
									</div>
									<div class="form-group">
										<label for="" class="col-xs-2 control-label">商品列表：</label>
										<div class="col-xs-10 goods-list">
											<ul class="col-xs-12" id="goodsul_new">
											</ul>
											<div class="col-xs-3">
												<select id="classificationOne_new" class="form-control" data-state="3">
													<option value="-1" selected="selected">一级分类</option>
													<option data-id="1" value="第一大类">第一大类</option>
													<option data-id="2" value="第二大类">第二大类</option>
													<option data-id="3" value="第三大类">第三大类</option>
													<option data-id="4" value="第四大类">第四大类</option>
													<option data-id="5" value="第五大类">第五大类</option>
												</select>
											</div>
											<div class="col-xs-3">
												<select id="classificationTwo_new" class="form-control" data-state="2">
													<option value="-1" selected="selected">二级分类</option>
													<option data-id="1" value="粮食">粮食</option>
													<option data-id="2" value="好吃的">好吃的</option>
													<option data-id="3" value="化妆品">化妆品</option>
													<option data-id="4" value="电器">电器</option>
												</select>
											</div>
											<div class="col-xs-3">
												<select id="goods_new" class="form-control" data-state="1">
													<option value="-1" selected="selected">商品名称</option>
													<option data-id="1" value="九多肉多">九多肉多</option>
													<option data-id="2" value="棉花糖">棉花糖</option>
													<option data-id="3" value="日历">日历</option>
													<option data-id="4" value="笔记本">笔记本</option>
												</select>
											</div>
											<div class="col-xs-3">
												<button type="button" class="btncss jl-btn-importent" id="goodsAddBtn_new">新增</button>
												<input type="text" id="goodsidStr_new" class="hidden" />
												<input type="text" id="stateStr_new" class="hidden" />
											</div>
										</div>
									</div>
								</div>
								<div class="col-xs-2">
									<div class="big-photo">
										<div id="preview1">
											<img id="imghead1" border="0" src="../../../img/photo_icon.jpg" width="90" height="90" onclick="$('#previewImg1').click();">
										</div>
										<input type="file" onchange="previewImage(this,1)" style="display: none;" id="previewImg1" name="previewImg" accept="image/gif,image/jpeg,image/jpg,image/png,image/svg">
										<!--<input id="uploaderInput" class="uploader__input" style="display: none;" type="file" accept="" multiple="">-->
									</div>
								</div>
							</div>
						</form>
					</div>

					<div class="search-div clearfix">
						<form class="container-fluid">
							<div class="row">
								<div class="col-xs-10">
									<div class="form-group">
										<label for="" class="col-xs-2 control-label">分类名称：</label>
										<div class="col-xs-10">
											测试用热卖
										</div>
									</div>
									<div class="form-group">
										<label for="" class="col-xs-2 control-label">商品列表：</label>
										<div class="col-xs-10 goods-list">
											<ul class="col-xs-12" id="goodsul_hot">
											</ul>
											<div class="col-xs-3">
												<select id="classificationOne_hot" class="form-control" data-state="3">
													<option value="-1" selected="selected">一级分类</option>
													<option data-id="1" value="第一大类">第一大类</option>
													<option data-id="2" value="第二大类">第二大类</option>
													<option data-id="3" value="第三大类">第三大类</option>
													<option data-id="4" value="第四大类">第四大类</option>
													<option data-id="5" value="第五大类">第五大类</option>
												</select>
											</div>
											<div class="col-xs-3">
												<select id="classificationTwo_hot" class="form-control" data-state="2">
													<option value="-1" selected="selected">二级分类</option>
													<option data-id="1" value="粮食">粮食</option>
													<option data-id="2" value="好吃的">好吃的</option>
													<option data-id="3" value="化妆品">化妆品</option>
													<option data-id="4" value="电器">电器</option>
												</select>
											</div>
											<div class="col-xs-3">
												<select id="goods_hot" class="form-control" data-state="1">
													<option value="-1" selected="selected">商品名称</option>
													<option data-id="1" value="九多肉多">九多肉多</option>
													<option data-id="2" value="棉花糖">棉花糖</option>
													<option data-id="3" value="日历">日历</option>
													<option data-id="4" value="笔记本">笔记本</option>
												</select>
											</div>
											<div class="col-xs-3">
												<button type="button" class="btncss jl-btn-importent" id="goodsAddBtn_hot">新增</button>
												<input type="text" id="goodsidStr_hot" class="hidden" />
												<input type="text" id="stateStr_hot" class="hidden" />
											</div>
										</div>
									</div>
								</div>
								<div class="col-xs-2">
									<div class="big-photo">
										<div id="preview2">
											<img id="imghead2" border="0" src="../../../img/photo_icon.jpg" width="90" height="90" onclick="$('#previewImg2').click();">
										</div>
										<input type="file" onchange="previewImage(this,2)" style="display: none;" id="previewImg2" name="previewImg" accept="image/gif,image/jpeg,image/jpg,image/png,image/svg">
										<!--<input id="uploaderInput" class="uploader__input" style="display: none;" type="file" accept="" multiple="">-->
									</div>
								</div>
							</div>
						</form>
					</div>

					<div class="search-div clearfix">
						<form class="container-fluid">
							<div class="row">
								<div class="col-xs-10">
									<div class="form-group">
										<label for="" class="col-xs-2 control-label">分类名称：</label>
										<div class="col-xs-10">
											爆品预售
										</div>
									</div>
									<div class="form-group">
										<label for="" class="col-xs-2 control-label">商品列表：</label>
										<div class="col-xs-10 goods-list">
											<ul class="col-xs-12" id="goodsul_presale">
											</ul>
											<div class="col-xs-3">
												<select id="classificationOne_presale" class="form-control" data-state="3">
													<option value="-1" selected="selected">一级分类</option>
													<option data-id="1" value="第一大类">第一大类</option>
													<option data-id="2" value="第二大类">第二大类</option>
													<option data-id="3" value="第三大类">第三大类</option>
													<option data-id="4" value="第四大类">第四大类</option>
													<option data-id="5" value="第五大类">第五大类</option>
												</select>
											</div>
											<div class="col-xs-3">
												<select id="classificationTwo_presale" class="form-control" data-state="2">
													<option value="-1" selected="selected">二级分类</option>
													<option data-id="1" value="粮食">粮食</option>
													<option data-id="2" value="好吃的">好吃的</option>
													<option data-id="3" value="化妆品">化妆品</option>
													<option data-id="4" value="电器">电器</option>
												</select>
											</div>
											<div class="col-xs-3">
												<select id="goods_presale" class="form-control" data-state="1">
													<option value="-1" selected="selected">商品名称</option>
													<option data-id="1" value="九多肉多">九多肉多</option>
													<option data-id="2" value="棉花糖">棉花糖</option>
													<option data-id="3" value="日历">日历</option>
													<option data-id="4" value="笔记本">笔记本</option>
												</select>
											</div>

											<div class="col-xs-3">
												<button type="button" class="btncss jl-btn-importent" id="goodsAddBtn_presale">新增</button>
												<input type="text" id="goodsidStr_presale" class="hidden" />
												<input type="text" id="stateStr_presale" class="hidden" />
											</div>
										</div>
									</div>
								</div>
								<div class="col-xs-2">
									<div class="big-photo">
										<div id="preview3">
											<img id="imghead3" border="0" src="../../../img/photo_icon.jpg" width="90" height="90" onclick="$('#previewImg3').click();">
										</div>
										<input type="file" onchange="previewImage(this,3)" style="display: none;" id="previewImg3" name="previewImg" accept="image/gif,image/jpeg,image/jpg,image/png,image/svg">
										<!--<input id="uploaderInput" class="uploader__input" style="display: none;" type="file" accept="" multiple="">-->
									</div>
								</div>
							</div>
						</form>
					</div>

					<div class="text-center">
						<input type="button" class="btncss jl-btn-importent" onclick="hotCategoriesEffect()" value="生效" />
						<input type="button" class="btncss jl-btn-defult" value="取消" onclick="refresh()" />
					</div>

				</div>
			</div>
		</div>

	</body>

	<script>
		/*
		 * 字段声明：火热促销（sale）
		 */
		var goodsIdstr_sale = ""; //商品id字符串
		var goodsStatestr_sale = ""; //商品类型字符创
		var checkGoods3_sale = []; //商品选中——一级分类
		var checkGoods2_sale = []; //商品选中——二级分类
		var checkGoods1_sale = []; //商品选中——商品
		//用于记录"火热促销"中下拉菜单选中值
		var classificationOne_sale = {
			id: "",
			state: "3",
			goodsname: "-1"
		};
		var classificationTwo_sale = {
			id: "",
			state: "2",
			goodsname: "-1"
		};
		var goods_sale = {
			id: "",
			state: "1",
			goodsname: "-1"
		};

		/*
		 * 字段声明：新品上架（new）
		 */
		var goodsIdstr_new = ""; //商品id字符串
		var goodsStatestr_new = ""; //商品类型字符创
		var checkGoods3_new = []; //商品选中——一级分类
		var checkGoods2_new = []; //商品选中——二级分类
		var checkGoods1_new = []; //商品选中——商品
		//用于记录"新品上架"中下拉菜单选中值
		var classificationOne_new = {
			id: "",
			state: "3",
			goodsname: "-1"
		};
		var classificationTwo_new = {
			id: "",
			state: "2",
			goodsname: "-1"
		};
		var goods_new = {
			id: "",
			state: "1",
			goodsname: "-1"
		};

		/*
		 * 字段声明：君霖热卖（hot）
		 */
		var goodsIdstr_hot = ""; //商品id字符串
		var goodsStatestr_hot = ""; //商品类型字符创
		var checkGoods3_hot = []; //商品选中——一级分类
		var checkGoods2_hot = []; //商品选中——二级分类
		var checkGoods1_hot = []; //商品选中——商品
		//用于记录"新品上架"中下拉菜单选中值
		var classificationOne_hot = {
			id: "",
			state: "3",
			goodsname: "-1"
		};
		var classificationTwo_hot = {
			id: "",
			state: "2",
			goodsname: "-1"
		};
		var goods_hot = {
			id: "",
			state: "1",
			goodsname: "-1"
		};

		/*
		 * 字段声明：爆品预售（presale）
		 */
		var goodsIdstr_presale = ""; //商品id字符串
		var goodsStatestr_presale = ""; //商品类型字符创
		var checkGoods3_presale = []; //商品选中——一级分类
		var checkGoods2_presale = []; //商品选中——二级分类
		var checkGoods1_presale = []; //商品选中——商品
		//用于记录"新品上架"中下拉菜单选中值
		var classificationOne_presale = {
			id: "",
			state: "3",
			goodsname: "-1"
		};
		var classificationTwo_presale = {
			id: "",
			state: "2",
			goodsname: "-1"
		};
		var goods_presale = {
			id: "",
			state: "1",
			goodsname: "-1"
		};

		/*
		 * 调用getgoods($select, type)当selectde的触发change事件时获取页面内下拉菜单选中值
		 */
		getgoods($("#classificationOne_sale"), 1);
		getgoods($("#classificationTwo_sale"), 2);
		getgoods($("#goods_sale"), 3);
		getgoods($("#classificationOne_new"), 4);
		getgoods($("#classificationTwo_new"), 5);
		getgoods($("#goods_new"), 6);
		getgoods($("#classificationOne_hot"), 7);
		getgoods($("#classificationTwo_hot"), 8);
		getgoods($("#goods_hot"), 9);
		getgoods($("#classificationOne_presale"), 10);
		getgoods($("#classificationTwo_presale"), 11);
		getgoods($("#goods_presale"), 12);

		/*
		 * 调用appendgoods()添加商品
		 */
		appendgoods($("#goodsAddBtn_sale"), "sale");
		appendgoods($("#goodsAddBtn_new"), "new");
		appendgoods($("#goodsAddBtn_hot"), "hot");
		appendgoods($("#goodsAddBtn_presale"), "presale");

		/*
		 * appendgoods()(基本方法)
		 * 用处：添加商品
		 * 传入参数：$btn(触发事件按钮),categorieStr(模块分类名称)
		 * 
		 */

		function appendgoods($btn, categorieStr) {
			var $goods = '';
			$btn.click(function() {
				$goods = ''
				if(eval("goods_" + categorieStr)["goodsname"] != -1) { //商品
					if(checkgoods(categorieStr, eval("goods_" + categorieStr)["state"])) {
						$goods = '<li data-id="' + eval("goods_" + categorieStr)["id"] + '" data-state="' + eval("goods_" + categorieStr)["state"] + '">' + eval("goods_" + categorieStr)["goodsname"] + '<div onclick="delgoods(this,\'' + categorieStr + '\')" class="delgoods-div"><i class="fa fa-times"></i></div></li>';
						eval("checkGoods1_" + categorieStr).push({
							"goodsid": eval("goods_" + categorieStr)["id"],
							"classificationTwoid": eval("classificationTwo_" + categorieStr)["id"],
							"classificationOneid": eval("classificationOne_" + categorieStr)["id"]
						});
//						console.log(eval("checkGoods1_" + categorieStr));
					} else {
						laywarn("请勿选择重复商品");
					}

				} else if(eval("classificationTwo_" + categorieStr)["goodsname"] != -1) { //第二大类
					if(checkgoods(categorieStr, eval("classificationTwo_" + categorieStr)["state"])) {
						$goods = '<li data-id="' + eval("classificationTwo_" + categorieStr)["id"] + '" data-state="' + eval("classificationTwo_" + categorieStr)["state"] + '">' + eval("classificationTwo_" + categorieStr)["goodsname"] + '<div onclick="delgoods(this,\'' + categorieStr + '\')" class="delgoods-div"><i class="fa fa-times"></i></div></li>';
						eval("checkGoods2_" + categorieStr).push({
							"classificationTwoid": eval("classificationTwo_" + categorieStr)["id"],
							"classificationOneid": eval("classificationOne_" + categorieStr)["id"]
						});
//						console.log(eval("checkGoods2_" + categorieStr));
					} else {
						laywarn("请勿选择重复商品");
					}
				} else if(eval("classificationOne_" + categorieStr)["goodsname"] != -1) { //第一大类
					if(checkgoods(categorieStr, eval("classificationOne_" + categorieStr)["state"])) {
						$goods = '<li data-id="' + eval("classificationOne_" + categorieStr)["id"] + '" data-state="' + eval("classificationOne_" + categorieStr)["state"] + '">' + eval("classificationOne_" + categorieStr)["goodsname"] + '<div onclick="delgoods(this,\'' + categorieStr + '\')" class="delgoods-div"><i class="fa fa-times"></i></div></li>';
						eval("checkGoods3_" + categorieStr).push({
							"classificationOneid": eval("classificationOne_" + categorieStr)["id"]
						});
//						console.log(eval("checkGoods3_" + categorieStr));
					} else {
						laywarn("请勿选择重复商品");
					}
				} else { //未选中
					laywarn("请先选择商品。");

				}
				$("#goodsul_" + categorieStr).append($goods);
			})
		}

		/*
		 * delgoods()(基本方法)
		 * 用处：删除商品
		 * 传入参数：thisbtn(删除按钮),categorieStr(模块分类名称)
		 * 
		 */

		function delgoods(thisbtn, categorieStr) {
			$(thisbtn).parent().remove();
			var num = $(thisbtn).parent().attr("data-state") - 0;
			var obj = {
				"goodsid": eval("goods_" + categorieStr)["id"],
				"classificationTwoid": eval("classificationTwo_" + categorieStr)["id"],
				"classificationOneid": eval("classificationOne_" + categorieStr)["id"]
			};
			switch(num) {
				case 1:
					$(eval("checkGoods1_" + categorieStr)).each(function(i, dom) {
						if(dom["goodsid"] == $(thisbtn).parent().attr("data-id")) {
							eval("checkGoods1_" + categorieStr).splice(i, 1);
						}
					});
					break;
				case 2:
					$(eval("checkGoods2_" + categorieStr)).each(function(i, dom) {
						if(dom["classificationTwoid"] == $(thisbtn).parent().attr("data-id")) {
							eval("checkGoods2_" + categorieStr).splice(i, 1);
						}
					});
					break;
				case 3:
					$(eval("checkGoods3_" + categorieStr)).each(function(i, dom) {
						if(dom["classificationOneid"] == $(thisbtn).parent().attr("data-id")) {
							eval("checkGoods3_" + categorieStr).splice(i, 1);

						}
					});
					break;
			}
		}

		/*
		 * checkgoods()(基本方法)
		 * 用处：检查传入商品是否重复
		 * 传入参数：categorieStr(模块分类名称),goodsstate(商品所属分类)
		 * 返回值 ：返回商品是否重复，重复：false,不重复：true.
		 */

		function checkgoods(categorieStr, goodsstate) {
			var res = true;
			goodsstate = goodsstate - 0;
			switch(goodsstate) {
				case 1: //goods
					var obj = {
						"goodsid": eval("goods_" + categorieStr)["id"],
						"classificationTwoid": eval("classificationTwo_" + categorieStr)["id"],
						"classificationOneid": eval("classificationOne_" + categorieStr)["id"]
					};
					$(eval("checkGoods1_" + categorieStr)).each(function(i, dom) {
						if(dom["goodsid"] == eval("goods_" + categorieStr)["id"]) {
							res = false;
						}
					});
					$(eval("checkGoods2_" + categorieStr)).each(function(i, dom) {
						if(dom["classificationTwoid"] == eval("classificationTwo_" + categorieStr)["id"]) {
							res = false;
						}
					});
					$(eval("checkGoods3_" + categorieStr)).each(function(i, dom) {
						if(dom["classificationOneid"] == eval("classificationOne_" + categorieStr)["id"]) {
							res = false;
						}
					});
					break;
				case 2: //classificationTwo
					var obj = {
						"classificationTwoid": eval("classificationTwo_" + categorieStr)["id"],
						"classificationOneid": eval("classificationOne_" + categorieStr)["id"]
					};
					$(eval("checkGoods1_" + categorieStr)).each(function(i, dom) {
						if(dom["classificationTwoid"] == eval("classificationTwo_" + categorieStr)["id"]) {
							res = false;
						}
					});
					$(eval("checkGoods2_" + categorieStr)).each(function(i, dom) {
						if(dom["classificationTwoid"] == eval("classificationTwo_" + categorieStr)["id"]) {
							res = false;
						}
					});
					$(eval("checkGoods3_" + categorieStr)).each(function(i, dom) {
						if(dom["classificationOneid"] == eval("classificationOne_" + categorieStr)["id"]) {
							res = false;
						}
					});
					break;
				case 3: //classificationOne
					var obj = {
						"classificationOneid": eval("classificationOne_" + categorieStr)["id"]
					};

					$(eval("checkGoods1_" + categorieStr)).each(function(i, dom) {
						if(dom["classificationOneid"] == eval("classificationOne_" + categorieStr)["id"]) {
							res = false;
						}
					});
					$(eval("checkGoods2_" + categorieStr)).each(function(i, dom) {
						if(dom["classificationOneid"] == eval("classificationOne_" + categorieStr)["id"]) {
							res = false;
						}
					});
					$(eval("checkGoods3_" + categorieStr)).each(function(i, dom) {
						if(dom["classificationOneid"] == eval("classificationOne_" + categorieStr)["id"]) {
							res = false;
						}
					});

					break;
			}

			return res;
		}

		/*
		 * countgoods()(基本方法)
		 * 用处：计算商品并将选中商品id变成字符串，传给相应input
		 * 
		 */

		function countgoods() {

			/*初始化*/
			goodsIdstr_sale = "";
			goodsStatestr_sale = "";
			goodsIdstr_new = "";
			goodsStatestr_new = "";
			goodsIdstr_hot = "";
			goodsStatestr_hot = "";
			goodsIdstr_presale = "";
			goodsStatestr_presale = "";

			eachli("sale");
			eachli("new");
			eachli("hot");
			eachli("presale");

			function eachli(type) {
				var goodsStatestr = eval("goodsStatestr_" + type);
				var goodsIdstr = eval("goodsIdstr_" + type);
				$("#goodsul_" + type + " li").each(function() {
					goodsStatestr = goodsStatestr + $(this).attr("data-state") + ",";
					goodsIdstr = goodsIdstr + $(this).attr("data-id") + ",";
				});
				goodsIdstr = goodsIdstr.substring(0, goodsIdstr.length - 1);
				goodsStatestr = goodsStatestr.substring(0, goodsStatestr.length - 1).replace(/3/g, "2");
				$("#goodsidStr_" + type).val(goodsIdstr);
				$("#stateStr_" + type).val(goodsStatestr);
			}

		}

		/*
		 * getgoods($select, type)(基本方法)
		 * 用处：用户获取页面内下拉菜单选中值
		 * 传入参数：selectobj(选定对应select),type(指向相应参数，用于将获取参数付给全局变量，便于使用)
		 * 
		 */
		function getgoods($select, type) {
			$select.change(function() {
				var goodsname = $(this).val();
				var state = $(this).attr("data-state");
				var id = $(this).find("option:selected").attr("data-id");
				var mygoods = {
					"id": id,
					"state": state,
					"goodsname": goodsname
				};
				switch(type) {
					case 1:
						classificationOne_sale = mygoods;
						break;
					case 2:
						classificationTwo_sale = mygoods;
						break;
					case 3:
						goods_sale = mygoods;
						break;
					case 4:
						classificationOne_new = mygoods;
						break;
					case 5:
						classificationTwo_new = mygoods;
						break;
					case 6:
						goods_new = mygoods;
						break;
					case 7:
						classificationOne_hot = mygoods;
						break;
					case 8:
						classificationTwo_hot = mygoods;
						break;
					case 9:
						goods_hot = mygoods;
						break;
					case 10:
						classificationOne_presale = mygoods;
						break;
					case 11:
						classificationTwo_presale = mygoods;
						break;
					case 12:
						goods_presale = mygoods;
						break;

				}
			})

		}

		/*
		 * hotCategoriesEffect()(基本方法)
		 * 用处：页面内容提交生效
		 */
		function hotCategoriesEffect() {

			publicMessageLayer("生效此广告", function() {
				countgoods();
				/*console.log($("#goodsidStr_sale").val());
				console.log($("#stateStr_sale").val());
				console.log($("#goodsidStr_new").val());
				console.log($("#stateStr_new").val());
				console.log($("#goodsidStr_hot").val());
				console.log($("#stateStr_hot").val());
				console.log($("#goodsidStr_presale").val());
				console.log($("#stateStr_presale").val());*/

				laysuccess("已生效");
			})
		}

		function refresh() {
			window.location.reload();
		}
	</script>

</html>